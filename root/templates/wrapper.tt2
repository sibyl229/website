[%#- THIS IS THE PRIMARY WRAPPER, ROUTING REQUESTS TO THE APPROPRIATE LAYOUT -%]

[% IF template.name.match('\.(css|js|txt)');
     debug("Passing page through as text: $template.name");
     content;

   ELSIF (c.stash.noboiler);
     debug("Passing request through without wrapping: $template.name");
     content;

   ELSIF (c.stash.unbuffer);
     debug("Passing widget: $template.name through without wrapping");
     content;
   ELSE;
     debug("Applying HTML page layout wrappers to $template.name\n");

     IF c.stash.use_dev_template;  # when webpack dev server is running, refer to Controller/Root.pm
         IF is_classic;
              content WRAPPER boilerplate/dev_html; # dev_html is generated by webpack dev server and saved to file at page load
         ELSE;
              content WRAPPER boilerplate/dev_html + layout/default.tt2;
         END;
     ELSE;
         IF is_classic;
              content WRAPPER index.html;  # found in /client/build/ generated by webpack build
         ELSE;
              content WRAPPER index.html + layout/default.tt2;
         END;
     END;

   END;
-%]
